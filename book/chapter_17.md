# ГЛАВА 17

#### [Левая страница]

```text
// CHAPTER 17 ___________________________________________
// THE CONTEXT WINDOW

> СУТЬ (STATUS):
КРАТКОСРОЧНАЯ ПАМЯТЬ.
Контекстное окно — это лимит токенов, который модель может
"держать в голове" одновременно. Всё, что выпадает из окна,
перестает существовать.

> ПОЧЕМУ ЭТО ВАЖНО (WHY IT MATTERS):
 1. Забывчивость: Если вы отправите модели книгу, которая
    больше её окна, она забудет первую главу, пока будет
    читать последнюю.
 2. Деньги: Чем больше окно, тем дороже запрос.
    Огромное окно (1M токенов) — это роскошь.
 3. RAG: Из-за лимита окна мы вынуждены использовать
    внешние базы знаний (RAG), подсовывая модели только
    нужные страницы.
```

---

#### [Правая страница]

**ПОГРУЖЕНИЕ:**

Представьте, что вы читаете текст через узкую щель в заборе. Вы видите только 100 слов одновременно. Чтобы прочитать следующее слово, вы должны "забыть" первое.
Это и есть **Context Window**.

В 2023 году (GPT-4) это окно было размером с брошюру (8K токенов).
В 2025 году (Gemini 1.5) это окно размером с библиотеку (1M+ токенов).

Но проблема не исчезла.
Окно работает по принципу FIFO (First In, First Out). Как только вы добавляете новое сообщение в чат, самое старое вываливается с другого конца.

**Эффект "Золотой Рыбки":**
Если вы пишете код большого проекта и просите ИИ "добавить кнопку", он может ответить: "Какой код?". Потому что файл с кодом, который вы кидали час назад, уже выпал из окна.

**Внимание (Attention) не резиновое.**
Даже если окно огромное, модель работает хуже, когда в ней много мусора. Это называется "Lost in the Middle" (Потерянный в середине). Модель хорошо помнит начало и конец, но путается в фактах, спрятанных в центре огромного текста.

> **Совет инженера:**
> Не ленитесь чистить контекст. Лучший промпт — это чистый промпт. Не нужно кормить модели всю "Войну и мир", если вам нужен ответ только про Пьера Безухова.

```text
       CONTEXT WINDOW (SLIDING)

       Limit: 5 Tokens

       Step 1: [ A B C D E ]
                 ^
                 In Focus

       Step 2 (Add F):
               A [ B C D E F ]
               ^
               Deleted (Lost forever)

       Step 3 (Add G):
               A B [ C D E F G ]
                 ^
                 Deleted
```
