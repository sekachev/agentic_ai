# Глава 4. Строительство машины

## От скрипта к продукту

Написать промпт или скрипт на Python — это полдела. Превратить его в надежный, работающий сервис, которым могут пользоваться другие люди — это инженерная задача.
Здесь мы выходим за пределы «чистого ИИ» и вступаем на территорию архитектуры программного обеспечения.

## Великое разделение: Frontend и Backend

Любой серьезный AI-сервис состоит из двух частей:
1.  **Frontend (Лицо)**: То, что видит пользователь. Красивые кнопки, чат, графики. Это работает в браузере или телефоне клиента.
2.  **Backend (Мозг)**: То, что скрыто под капотом. Здесь живет логика агента, ключи доступа к API, база данных.

Зачем разделять?
Главная причина — **Безопасность**.
Если вы вставите свой API-ключ от OpenAI прямо в код сайта, любой школьник сможет его украсть и потратить ваши деньги. Backend служит защитным шлюзом. Пользователь отправляет запрос на ваш сервер, а сервер уже от своего имени обращается к LLM.

## Анатомия реальных проектов

Давайте посмотрим на примеры того, как абстрактные идеи превращаются в сервисы:

*   **Умный дневник (Ruttu)**: Водитель просто говорит: «Съездил на объект А». Агент понимает контекст, находит координаты, считает километраж и заносит запись в отчет.
*   **Анализ документов (Dunven)**: Пользователь загружает фото накладной. Vision-модель превращает картинку в Excel-таблицу, а агент проверяет цифры на ошибки.
*   **Спорт (EduSport)**: Тренер описывает упражнение голосом, а система создает структурированный план тренировки.

Во всех этих случаях ИИ — это лишь часть механизма. Вокруг него выстроена система сбора данных, хранения и отображения.

## Архитектурная трассировка

Как спроектировать такой сервис с нуля? Используйте метод трассировки:

1.  **Input (Вход)**: Что мы получаем? (Голос, текст, фото, файл).
2.  **Reasoning (Мышление)**: Что должен сделать ИИ? (Понять смысл, извлечь данные, принять решение).
3.  **Execution (Исполнение)**: Какие внешние сервисы нужны? (Погода, карты, база данных, почта).
4.  **Output (Выход)**: Что получает пользователь? (Отчет, уведомление, график).

## Где хранить память?

Агенту нужно где-то хранить знания.
*   **LocalStorage / Cookies**: Самый простой вариант. Данные хранятся прямо в браузере пользователя. Подходит для настроек или временной истории.
*   **Airtable**: Отличный выбор для MVP (минимально жизнеспособного продукта). Это как Excel на стероидах, который имеет API. Вы можете руками править данные, и агент будет их видеть.
*   **Базы данных (Supabase, PostgreSQL)**: Выбор профессионалов. Надежное хранение миллионов записей, быстрый поиск и безопасность.

## Скелет приложения

В основе взаимодействия лежит **API (Application Programming Interface)**.
Ваш Backend создает «ручки» (endpoints), за которые может дергать Frontend.
Например: `POST /api/analyze-photo`.
Frontend отправляет туда картинку, Backend запускает агента, агент думает, дергает инструменты и возвращает JSON с результатом.

Понимание этой структуры отличает любителя, играющего с ChatGPT, от архитектора, создающего AI-продукты.
